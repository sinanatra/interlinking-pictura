import{_ as Ae}from"../chunks/preload-helper.41c905a7.js";import{S as Pe,i as Se,s as De,k as N,q as Z,a as W,l as A,m as M,r as K,h,c as X,n as p,b as w,G as C,u as me,H as $,I as Q,o as Be,R as x,L as Oe,M as H,T as Jt,N as ye,j as Mt,U as Vt,e as F,J as Le,V as je,W as Ce,w as Ee,K as qe,g as j,v as fe,d as G,f as ue,y as ge,z as be,A as ve,B as ke,X as Ie,Y as we,Z as ze,_ as Zt,O as Kt,p as Qt}from"../chunks/index.7c5e5199.js";import{u as le,b as Re,p as ae,t as $t,l as xt,a as Ye,i as $e,c as el}from"../chunks/setup.d72a6436.js";import{w as pe,e as jt}from"../chunks/singletons.ee3f9d2f.js";import{p as tl}from"../chunks/stores.426d3497.js";const ll=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/der_elefant.md":()=>Ae(()=>import("../chunks/der_elefant.293458d5.js"),["../chunks/der_elefant.293458d5.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/template.md":()=>Ae(()=>import("../chunks/template.957b9dd5.js"),["../chunks/template.957b9dd5.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/vierfüssige_Thiere_aus_heißen_ländern.md":()=>Ae(()=>import("../chunks/vierfüssige_Thiere_aus_heißen_ländern.e9f2b47d.js"),["../chunks/vierfüssige_Thiere_aus_heißen_ländern.e9f2b47d.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/weltwunder.md":()=>Ae(()=>import("../chunks/weltwunder.0bc3395e.js"),["../chunks/weltwunder.0bc3395e.js","../chunks/index.7c5e5199.js"],import.meta.url)}));return await Promise.all(e.map(async([t,i])=>{const n=await i(),{html:r}=n.default.render(),a=t.slice(17,-3),o=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,u=[...r.matchAll(o)].map(c=>c[2]).filter(c=>!c.startsWith("http")).map(c=>{const f=c.lastIndexOf("/");return f!==-1?c.substring(f+1):c});return{meta:n.metadata,path:a,text:r,links:u}}))},sl=async({fetch:s})=>({posts:await(await s("/api/posts")).json()}),il=async()=>(await ll()).sort().map(l=>({slug:l.path.replaceAll("/","")})),is=Object.freeze(Object.defineProperty({__proto__:null,entries:il,load:sl},Symbol.toStringTag,{value:"Module"})),Ke=pe(""),Fe=pe(""),Te=pe(!1),Je=pe([]),he=pe([]),Me=pe([]),Ve=pe(0);function xe(s){var i;let e,l=((i=s[0].meta)==null?void 0:i.description)+"",t;return{c(){e=N("div"),t=Z(l),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=M(e);t=K(r,l),r.forEach(h),this.h()},h(){p(e,"class","description svelte-rrhrf8")},m(n,r){w(n,e,r),C(e,t)},p(n,r){var a;r&1&&l!==(l=((a=n[0].meta)==null?void 0:a.description)+"")&&me(t,l)},d(n){n&&h(e)}}}function et(s){let e,l=s[0].meta.author+"",t;return{c(){e=N("div"),t=Z(l),this.h()},l(i){e=A(i,"DIV",{class:!0});var n=M(e);t=K(n,l),n.forEach(h),this.h()},h(){p(e,"class","author svelte-rrhrf8")},m(i,n){w(i,e,n),C(e,t)},p(i,n){n&1&&l!==(l=i[0].meta.author+"")&&me(t,l)},d(i){i&&h(e)}}}function tt(s){var n;let e,l,t=((n=new Date(s[0].meta.date))==null?void 0:n.toLocaleDateString(s[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"",i;return{c(){e=N("div"),l=N("div"),i=Z(t),this.h()},l(r){e=A(r,"DIV",{class:!0});var a=M(e);l=A(a,"DIV",{class:!0});var o=M(l);i=K(o,t),o.forEach(h),a.forEach(h),this.h()},h(){p(l,"class","date svelte-rrhrf8"),p(e,"class","date svelte-rrhrf8")},m(r,a){w(r,e,a),C(e,l),C(l,i)},p(r,a){var o;a&1&&t!==(t=((o=new Date(r[0].meta.date))==null?void 0:o.toLocaleDateString(r[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"")&&me(i,t)},d(r){r&&h(e)}}}function nl(s){var S,E,O;let e,l,t,i,n=s[0].meta.title+"",r,a,o,u,c,f,b,d=((S=s[0].meta)==null?void 0:S.description)&&xe(s),v=((E=s[0].meta)==null?void 0:E.author)&&et(s),g=((O=s[0].meta)==null?void 0:O.date)&&tt(s);return{c(){e=N("a"),l=Z("← Index"),t=W(),i=N("h1"),r=Z(n),a=W(),d&&d.c(),o=W(),u=N("div"),v&&v.c(),c=W(),g&&g.c(),f=W(),b=N("div"),this.h()},l(_){e=A(_,"A",{href:!0,class:!0,rel:!0});var I=M(e);l=K(I,"← Index"),I.forEach(h),t=X(_),i=A(_,"H1",{class:!0});var P=M(i);r=K(P,n),P.forEach(h),a=X(_),d&&d.l(_),o=X(_),u=A(_,"DIV",{class:!0});var m=M(u);v&&v.l(m),c=X(m),g&&g.l(m),m.forEach(h),f=X(_),b=A(_,"DIV",{class:!0});var k=M(b);k.forEach(h),this.h()},h(){p(e,"href",jt+"/"),p(e,"class","index svelte-rrhrf8"),p(e,"rel","noopener noreferrer"),p(i,"class","svelte-rrhrf8"),p(u,"class","metadata svelte-rrhrf8"),p(b,"class","markdown svelte-rrhrf8")},m(_,I){w(_,e,I),C(e,l),w(_,t,I),w(_,i,I),C(i,r),w(_,a,I),d&&d.m(_,I),w(_,o,I),w(_,u,I),v&&v.m(u,null),C(u,c),g&&g.m(u,null),w(_,f,I),w(_,b,I),b.innerHTML=s[1]},p(_,[I]){var P,m,k;I&1&&n!==(n=_[0].meta.title+"")&&me(r,n),(P=_[0].meta)!=null&&P.description?d?d.p(_,I):(d=xe(_),d.c(),d.m(o.parentNode,o)):d&&(d.d(1),d=null),(m=_[0].meta)!=null&&m.author?v?v.p(_,I):(v=et(_),v.c(),v.m(u,c)):v&&(v.d(1),v=null),(k=_[0].meta)!=null&&k.date?g?g.p(_,I):(g=tt(_),g.c(),g.m(u,null)):g&&(g.d(1),g=null)},i:$,o:$,d(_){_&&h(e),_&&h(t),_&&h(i),_&&h(a),d&&d.d(_),_&&h(o),_&&h(u),v&&v.d(),g&&g.d(),_&&h(f),_&&h(b)}}}const rl=/\[\^([^\]]+)\]/g;let al=100;function ol(s){const e=s.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),s.currentTarget.classList.add("hover")}function fl(s){const e=s.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),s.currentTarget.classList.remove("hover")}function ul(s,e,l){const t=l-e;return(s-e)/t*100}function cl(s,e,l){const t=l-e;return e+t*s/100}function dl(s,e,l){let t,i;Q(s,Te,_=>l(8,t=_)),Q(s,Ke,_=>l(9,i=_));let{data:n}=e,{items:r}=e,{scrollTopVal:a}=e,o=n.text,u=1;const f=o.replace(/<a\s+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,(_,I,P)=>{if(I.startsWith("http")&!I.startsWith(le))return`<a class="external" target="_blank" href="${I}" title="${P}">${P}</a>`;{let m=decodeURIComponent(I);return`<a class="node-highlite" unique-id="${m}" id="${decodeURIComponent(I)}"
				data-id="${decodeURIComponent(I)}" title="${P}">${P}
				<span class="symbol node" unique-id="${m}" data-id="item_${decodeURIComponent(I)}"
				data-class="${r.filter(k=>k.label==P).map(k=>{var L,B;return(B=(L=k.data)==null?void 0:L["@type"])==null?void 0:B[1]})}">
					</span></a>`}}).replace(rl,(_,I)=>{const P=u++;return`<sup id="fn-${P}"><a href="#fnref-${P}">${P}</a></sup><span id="fn-${P}-content">${I}</span>`}),b=Array.from({length:u-1},(_,I)=>{var k;const P=I+1,m=(k=f.match(new RegExp(`<span id="fn-${P}-content">([^<]+)</span>`)))==null?void 0:k[1];return`<li id="fnref-${P}"> ${m}</li>`}).join(""),d=`${f}
	<ol class="biblio">${b}</ol>`;let v;Be(async()=>{l(4,v=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),S(v),v.forEach(_=>{_.addEventListener("mouseenter",ol),_.addEventListener("mouseleave",fl),_.addEventListener("click",g)})});function g(_){v.forEach(m=>{const k=m.getAttribute("data-id"),L=document.querySelector(`.node[data-id="${k}"]`);L&&L.classList.remove("clicked"),m.classList.remove("clicked")});const I=_.currentTarget.getAttribute("data-id"),P=document.querySelector(`.node[data-id="${I}"]`);P&&P.classList.toggle("clicked"),_.currentTarget.classList.toggle("clicked"),x(Ke,i=I,i)}function S(_){let I=null;l(4,v=Array.from(_).map(P=>{let m=P.offsetTop;return I!==null&&m<=I?P.adjustedOffsetTop=I+al:P.adjustedOffsetTop=m,I=P.adjustedOffsetTop,P}))}let E=0;function O(_,I){var P,m,k,L,B,U;if(!t){let R=(P=_==null?void 0:_[E])==null?void 0:P.adjustedOffsetTop,T=(m=_==null?void 0:_[E+1])==null?void 0:m.adjustedOffsetTop,Y=(k=_==null?void 0:_[E])==null?void 0:k.getAttribute("data-id"),re=(L=_==null?void 0:_[E+1])==null?void 0:L.getAttribute("data-id"),V=(B=document.querySelector(`.node[data-id="${Y}"]`))==null?void 0:B.offsetTop,se=(U=document.querySelector(`.node[data-id="${re}"]`))==null?void 0:U.offsetTop,te=ul(I,R,T),D=cl(te,V,se);I>T&&E++,I<R&&E!=0&&E--;const q=document.querySelector(".links:first-of-type");R&&T&&q&&te&&D&&(q==null||q.scrollTo({top:D}))}}return s.$$set=_=>{"data"in _&&l(0,n=_.data),"items"in _&&l(2,r=_.items),"scrollTopVal"in _&&l(3,a=_.scrollTopVal)},s.$$.update=()=>{s.$$.dirty&24&&O(v,a)},[n,d,r,a,v]}class _l extends Pe{constructor(e){super(),Se(this,e,dl,nl,De,{data:0,items:2,scrollTopVal:3})}}const Ue=pe([]);async function hl(){try{const s=Re.includes("http")?Re:`${jt}/${Re}`;console.log(`Fetching URL: ${s}`);const e=await fetch(s);if(!e.ok)throw new Error(`Failed to load db: ${e.statusText} (Status: ${e.status})`);const l=e.headers.get("content-type");if(!l||!l.includes("application/json"))throw new Error("Response is not valid JSON");const t=await e.json();Ue.set(t.map(i=>{var n,r,a;return{...i,"@id":(a=(r=(n=i["@id"])==null?void 0:n.replace(/\/items\//,"/resources/"))==null?void 0:r.replace(/\/media\//,"/resources/"))==null?void 0:a.replace(/\/item_sets\//,"/resources/")}})),console.log("Database loaded successfully.")}catch(s){console.error("Error loading db.json:",s)}}var ml=0;function pl(){return++ml}var Qe=Function("return this")();typeof Qe.__nextId!="function"&&(Qe.__nextId=pl);function qt(){return"uid-"+Qe.__nextId()}async function gl(s,e){const l=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,t=[];let i;for(;i=l.exec(s);)if(!(i[2].includes("http")&&!i[2].includes(le))){const a=i[3],o=decodeURIComponent(i[2]);t.push({label:a,id:o,url:o,data:[]})}const n=t.filter(a=>a.url).map(a=>a.id);let r=[...bl(n,e)];for(let a=0;a<t.length;a++){const o=t.find(c=>{var f;return(f=r[a])==null?void 0:f["@id"].includes(c.id)}),u=r[a];o&&(o.uniqueId=qt(),o.data=u)}return t}function bl(s,e,l){return e.filter(t=>{const i=t["@id"];return s.find(n=>n==i)}).map(t=>{var i,n,r;return t["@id"]=(r=(n=(i=t["@id"])==null?void 0:i.replace(/\/items\//,"/resources/"))==null?void 0:n.replace(/\/media\//,"/resources/"))==null?void 0:r.replace(/\/item_sets\//,"/resources/"),t})}async function zt(s){let e=[];for(let t=0;t<s.length;t++)if(s[t].data){let i=s[t].data,n=s[t].set||null,r=vl(i,n);e=[...e,...r]}return{...{nodes:e.reduce((t,i)=>(t.find(n=>n.id===i.source)||t.push({id:i.source,title:i.title}),t.find(n=>n.id===i.target)||t.push({id:i.target,title:i.title}),t),[]),links:e}}}function vl(s,e){var o;let l=[],t=s["@id"];e&&l.push({source:e["@id"],target:t,img:((o=s[ae.img[0]])==null?void 0:o[0]["@id"])||Ge(s,ae.img.join(".")),title:s[$t]});let i,n=!1;const r=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/,a=function(u){var c,f,b,d,v;for(let g in u)if(g==="@id"||g==="@value"&&(u[ae.title]||u.display_title||u["@id"]||n)){let S=u["@id"];S=S==null?void 0:S.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/");const E=u[ae.title]||u.display_title||u["@id"],O=(u==null?void 0:u.thumbnail_url)||((c=u[ae.img[0]])==null?void 0:c[0]["@id"])||Ge(u,ae.img.join("."));let _=((b=(f=u[void 0])==null?void 0:f.replace("_"," "))==null?void 0:b.replace(r,""))||(i==null?void 0:i.replace(r,""));l.some(P=>P.source===t&&P.target===S)||l.push({source:t,target:S,title:E,img:O,property:_,reverse:n,external:!S.includes(le)})}else typeof u[g]=="object"&&(isNaN(g)&&(i=(v=(d=(g==null?void 0:g.split(":"))[1])==null?void 0:d.split("_"))==null?void 0:v.join(" "),g==="@reverse"&&(n=!0)),a(u[g]))};return a(s),l}function Ge(s,e){return e.split(".").reduce((l,t)=>(l||{})[t],s)}function lt(s,e,l){const t=s.slice();return t[27]=e[l],t}function kl(s){var i;let e,l=(((i=s[0].title)==null?void 0:i.replace(le,""))||"")+"",t;return{c(){e=N("div"),t=Z(l),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=M(e);t=K(r,l),r.forEach(h),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){w(n,e,r),C(e,t)},p(n,r){var a;r&1&&l!==(l=(((a=n[0].title)==null?void 0:a.replace(le,""))||"")+"")&&me(t,l)},d(n){n&&h(e)}}}function yl(s){let e,l,t,i,n,r,a,o=s[0].title&&st(s);return{c(){e=N("img"),i=W(),o&&o.c(),n=F(),this.h()},l(u){e=A(u,"IMG",{src:!0,alt:!0,class:!0}),i=X(u),o&&o.l(u),n=F(),this.h()},h(){qe(e.src,l=s[5])||p(e,"src",l),p(e,"alt",t=s[0].title),p(e,"class","svelte-189mvtg")},m(u,c){w(u,e,c),w(u,i,c),o&&o.m(u,c),w(u,n,c),r||(a=[H(e,"load",s[11]),H(e,"error",Ft)],r=!0)},p(u,c){c&32&&!qe(e.src,l=u[5])&&p(e,"src",l),c&1&&t!==(t=u[0].title)&&p(e,"alt",t),u[0].title?o?o.p(u,c):(o=st(u),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(u){u&&h(e),u&&h(i),o&&o.d(u),u&&h(n),r=!1,ye(a)}}}function Il(s){let e,l,t,i,n,r,a,o=s[0].title&&it(s);return{c(){e=N("img"),i=W(),o&&o.c(),n=F(),this.h()},l(u){e=A(u,"IMG",{src:!0,alt:!0,class:!0}),i=X(u),o&&o.l(u),n=F(),this.h()},h(){qe(e.src,l=s[0].img.replace("square","large"))||p(e,"src",l),p(e,"alt",t=s[0].title),p(e,"class","svelte-189mvtg")},m(u,c){w(u,e,c),w(u,i,c),o&&o.m(u,c),w(u,n,c),r||(a=[H(e,"load",s[11]),H(e,"error",Ft)],r=!0)},p(u,c){c&1&&!qe(e.src,l=u[0].img.replace("square","large"))&&p(e,"src",l),c&1&&t!==(t=u[0].title)&&p(e,"alt",t),u[0].title?o?o.p(u,c):(o=it(u),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(u){u&&h(e),u&&h(i),o&&o.d(u),u&&h(n),r=!1,ye(a)}}}function st(s){var i;let e,l=(((i=s[0].title)==null?void 0:i.replace(le,""))||"")+"",t;return{c(){e=N("div"),t=Z(l),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=M(e);t=K(r,l),r.forEach(h),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){w(n,e,r),C(e,t)},p(n,r){var a;r&1&&l!==(l=(((a=n[0].title)==null?void 0:a.replace(le,""))||"")+"")&&me(t,l)},d(n){n&&h(e)}}}function it(s){var i;let e,l=((i=s[0].title)==null?void 0:i.replace(le,""))+"",t;return{c(){e=N("div"),t=Z(l),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=M(e);t=K(r,l),r.forEach(h),this.h()},h(){p(e,"class","title svelte-189mvtg")},m(n,r){w(n,e,r),C(e,t)},p(n,r){var a;r&1&&l!==(l=((a=n[0].title)==null?void 0:a.replace(le,""))+"")&&me(t,l)},d(n){n&&h(e)}}}function nt(s){let e,l=s[8].essays,t=[];for(let i=0;i<l.length;i+=1)t[i]=rt(lt(s,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=F()},l(i){for(let n=0;n<t.length;n+=1)t[n].l(i);e=F()},m(i,n){for(let r=0;r<t.length;r+=1)t[r].m(i,n);w(i,e,n)},p(i,n){if(n&256){l=i[8].essays;let r;for(r=0;r<l.length;r+=1){const a=lt(i,l,r);t[r]?t[r].p(a,n):(t[r]=rt(a),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(i){Le(t,i),i&&h(e)}}}function rt(s){let e,l,t,i=s[27].title+"",n,r;return{c(){e=N("a"),l=Z("→"),t=N("em"),n=Z(i),this.h()},l(a){e=A(a,"A",{class:!0,href:!0,target:!0,rel:!0});var o=M(e);l=K(o,"→"),t=A(o,"EM",{});var u=M(t);n=K(u,i),u.forEach(h),o.forEach(h),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",r=s[27].url),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(a,o){w(a,e,o),C(e,l),C(e,t),C(t,n)},p(a,o){o&256&&i!==(i=a[27].title+"")&&me(n,i),o&256&&r!==(r=a[27].url)&&p(e,"href",r)},d(a){a&&h(e)}}}function at(s){let e;function l(n,r){return n[0].title==null||n[0].title.length==1?El:wl}let t=l(s),i=t(s);return{c(){i.c(),e=F()},l(n){i.l(n),e=F()},m(n,r){i.m(n,r),w(n,e,r)},p(n,r){t===(t=l(n))&&i?i.p(n,r):(i.d(1),i=t(n),i&&(i.c(),i.m(e.parentNode,e)))},d(n){i.d(n),n&&h(e)}}}function wl(s){let e,l,t;return{c(){e=N("a"),l=Z("→ Metadata"),this.h()},l(i){e=A(i,"A",{class:!0,href:!0,target:!0,rel:!0});var n=M(e);l=K(n,"→ Metadata"),n.forEach(h),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",t=`${s[3]}/item/${s[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(i,n){w(i,e,n),C(e,l)},p(i,n){n&24&&t!==(t=`${i[3]}/item/${i[4]}`)&&p(e,"href",t)},d(i){i&&h(e)}}}function El(s){let e,l,t;return{c(){e=N("a"),l=Z("→ Metadata"),this.h()},l(i){e=A(i,"A",{class:!0,href:!0,target:!0,rel:!0});var n=M(e);l=K(n,"→ Metadata"),n.forEach(h),this.h()},h(){p(e,"class","link svelte-189mvtg"),p(e,"href",t=`${s[3]}/media/${s[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(i,n){w(i,e,n),C(e,l)},p(i,n){n&24&&t!==(t=`${i[3]}/media/${i[4]}`)&&p(e,"href",t)},d(i){i&&h(e)}}}function Pl(s){let e,l,t,i,n,r;function a(b,d){return b[0].img?Il:b[5]?yl:kl}let o=a(s),u=o(s),c=s[8]!=null&&nt(s),f=s[3]&&at(s);return{c(){e=N("div"),u.c(),l=W(),c&&c.c(),t=W(),f&&f.c(),this.h()},l(b){e=A(b,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var d=M(e);u.l(d),l=X(d),c&&c.l(d),t=X(d),f&&f.l(d),d.forEach(h),this.h()},h(){p(e,"class","node svelte-189mvtg"),p(e,"title",i=s[0].title),p(e,"source",s[9]),p(e,"target",s[4]),p(e,"data-id",s[4]),Oe(e,"selected",s[7]),Oe(e,"linkToEssay",s[8]!=null)},m(b,d){w(b,e,d),u.m(e,null),C(e,l),c&&c.m(e,null),C(e,t),f&&f.m(e,null),s[20](e),n||(r=[H(e,"mouseover",s[21]),H(e,"mouseleave",function(){Jt(s[13](s[4]))&&s[13](s[4]).apply(this,arguments)}),H(e,"click",s[17]),H(e,"keydown",s[18]),H(e,"focus",s[19])],n=!0)},p(b,[d]){s=b,o===(o=a(s))&&u?u.p(s,d):(u.d(1),u=o(s),u&&(u.c(),u.m(e,l))),s[8]!=null?c?c.p(s,d):(c=nt(s),c.c(),c.m(e,t)):c&&(c.d(1),c=null),s[3]?f?f.p(s,d):(f=at(s),f.c(),f.m(e,null)):f&&(f.d(1),f=null),d&1&&i!==(i=s[0].title)&&p(e,"title",i),d&512&&p(e,"source",s[9]),d&16&&p(e,"target",s[4]),d&16&&p(e,"data-id",s[4]),d&128&&Oe(e,"selected",s[7]),d&256&&Oe(e,"linkToEssay",s[8]!=null)},i:$,o:$,d(b){b&&h(e),u.d(),c&&c.d(),f&&f.d(),s[20](null),n=!1,ye(r)}}}function Ft(s){s.target.style.display="none"}function Sl(s,e,l){let t,i,n,r,a,o,u=$,c=()=>(u(),u=je(E,D=>l(23,o=D)),E),f,b=$,d=()=>(b(),b=je(O,D=>l(24,f=D)),O),v,g;Q(s,he,D=>l(16,a=D)),Q(s,Ke,D=>l(25,v=D)),Q(s,Fe,D=>l(10,g=D)),s.$$.on_destroy.push(()=>u()),s.$$.on_destroy.push(()=>b());let{datum:S}=e,{entities:E}=e;c();let{updatePosition:O}=e;d();let{essaysItems:_}=e,{site:I}=e,{openNode:P}=e,m,k=null;Mt(()=>{const D=S.source;D==`item_${v}`&&D!=k&&P(S,1),k=`item_${v}`}),Vt(()=>{x(O,f=!0,f)});function L(){x(O,f=!0,f)}function B(D){var oe,y;const q=D,J=o.find(z=>z["@id"]==q);return((y=(oe=J==null?void 0:J[ae.img[0]])==null?void 0:oe[0])==null?void 0:y["@id"])||Ge(J,ae.img.join("."))}let U;function R(D){const q=D,J=document.querySelector(`.node-highlite[data-id="${q}"]`);J&&J.classList.add("hover"),U.classList.add("hover")}function T(D){const q=D,J=document.querySelector(`.node-highlite[data-id="${q}"]`);J&&J.classList.remove("hover"),U.classList.remove("hover")}function Y(D){Ce.call(this,s,D)}function re(D){Ce.call(this,s,D)}function V(D){Ce.call(this,s,D)}function se(D){Ee[D?"unshift":"push"](()=>{U=D,l(6,U)})}const te=()=>{x(Fe,g=i,g),R(i)};return s.$$set=D=>{"datum"in D&&l(0,S=D.datum),"entities"in D&&c(l(1,E=D.entities)),"updatePosition"in D&&d(l(2,O=D.updatePosition)),"essaysItems"in D&&l(14,_=D.essaysItems),"site"in D&&l(3,I=D.site),"openNode"in D&&l(15,P=D.openNode)},s.$$.update=()=>{s.$$.dirty&1&&l(5,m=B(S.target)),s.$$.dirty&1&&l(9,t=S==null?void 0:S.source),s.$$.dirty&1&&l(4,i=S==null?void 0:S.target),s.$$.dirty&16400&&l(8,n=_.find(D=>D.id==i)),s.$$.dirty&65537&&l(7,r=a.some(D=>(D==null?void 0:D.id)==S.target))},[S,E,O,I,i,m,U,r,n,t,g,L,R,T,_,P,a,Y,re,V,se,te]}class Gt extends Pe{constructor(e){super(),Se(this,e,Sl,Pl,De,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}function Dl(s){let e,l,t;return{c(){e=N("div"),this.h()},l(i){e=A(i,"DIV",{source:!0,target:!0}),M(e).forEach(h),this.h()},h(){p(e,"source",l=s[0].source),p(e,"target",t=s[0].target)},m(i,n){w(i,e,n),s[8](e)},p(i,[n]){n&1&&l!==(l=i[0].source)&&p(e,"source",l),n&1&&t!==(t=i[0].target)&&p(e,"target",t)},i:$,o:$,d(i){i&&h(e),s[8](null)}}}let ot=0;function Tl(s,e,l){let t,i,n,r,a=$,o=()=>(a(),a=je(d,_=>l(5,r=_)),d),u,c;Q(s,Me,_=>l(12,n=_)),Q(s,Ve,_=>l(6,u=_)),Q(s,he,_=>l(7,c=_)),s.$$.on_destroy.push(()=>a());let{datum:f}=e,{label:b}=e,{updatePosition:d}=e;o();let v,g=qt();Be(()=>{E()});function S(_,I=0,P){const m=_,k=[...document.querySelectorAll(`.node[data-id="${m}"]`)],L=[];return k.forEach(B=>{const U=B.getBoundingClientRect(),R={x:U.x+u,y:U.y+I,width:U.width-I/2,height:U.height,selected:"selected"};L.push(R)}),L}function E(){delete n[g],x(d,r=!1,r);const _=S(f.source,ot),I=S(f.target,ot);v&&(v.getBoundingClientRect().x,v.getBoundingClientRect().y),_.forEach(P=>{I.forEach(m=>{let k=100;const L=P==null?void 0:P.selected;let B,U,R,T,Y;B=P.x+P.width,U=P.y,R=m.x,T=m.y,m.x<P.x||m.x==P.x?Y=m.x-k*5:m.x==P.x?Y=m.x-k*3:Y=m.x-k,f.source.includes("item_")&&(Y=m.x-k);const re=B+k,V=U,se=m.y,te=`M${B},${U}C${re},${V} ${Y},${se} ${R},${T}`;x(Me,n[g]=n[g]||[],n),n[g].push({class:i,d:te,label:b,selected:L,datum:{source:f.source,target:f.target},reverse:f==null?void 0:f.reverse})})})}Vt(()=>{delete n[g],x(Me,n=[],n)});function O(_){Ee[_?"unshift":"push"](()=>{v=_,l(2,v)})}return s.$$set=_=>{"datum"in _&&l(0,f=_.datum),"label"in _&&l(3,b=_.label),"updatePosition"in _&&o(l(1,d=_.updatePosition))},s.$$.update=()=>{s.$$.dirty&96&&E(),s.$$.dirty&128&&l(4,t=c.slice(-1)[0].id),s.$$.dirty&17&&(i=f.target==t||f.source==t?"highlite":"")},[f,d,v,b,t,r,u,c,O]}class Bt extends Pe{constructor(e){super(),Se(this,e,Tl,Dl,De,{datum:0,label:3,updatePosition:1})}}new TextEncoder;function ft(s,e,l){const t=s.slice();return t[23]=e[l],t}function ut(s){let e,l;return{c(){e=N("div"),l=Z("Loading..."),this.h()},l(t){e=A(t,"DIV",{class:!0});var i=M(e);l=K(i,"Loading..."),i.forEach(h),this.h()},h(){p(e,"class","loading svelte-1kyenid")},m(t,i){w(t,e,i),C(e,l)},d(t){t&&h(e)}}}function ct(s){let e,l,t=s[0],i=[];for(let r=0;r<t.length;r+=1)i[r]=_t(ft(s,t,r));const n=r=>G(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=F()},l(r){for(let a=0;a<i.length;a+=1)i[a].l(r);e=F()},m(r,a){for(let o=0;o<i.length;o+=1)i[o].m(r,a);w(r,e,a),l=!0},p(r,a){if(a&639){t=r[0];let o;for(o=0;o<t.length;o+=1){const u=ft(r,t,o);i[o]?(i[o].p(u,a),j(i[o],1)):(i[o]=_t(u),i[o].c(),j(i[o],1),i[o].m(e.parentNode,e))}for(fe(),o=t.length;o<i.length;o+=1)n(o);ue()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)j(i[a]);l=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)G(i[a]);l=!1},d(r){Le(i,r),r&&h(e)}}}function Ll(s){var t,i;let e,l;return e=new Bt({props:{datum:s[23],updatePosition:s[3],label:((i=(t=s[23])==null?void 0:t.property)==null?void 0:i.replace(le,""))||""}}),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,r){ve(e,n,r),l=!0},p(n,r){var o,u;const a={};r&1&&(a.datum=n[23]),r&8&&(a.updatePosition=n[3]),r&1&&(a.label=((u=(o=n[23])==null?void 0:o.property)==null?void 0:u.replace(le,""))||""),e.$set(a)},i(n){l||(j(e.$$.fragment,n),l=!0)},o(n){G(e.$$.fragment,n),l=!1},d(n){ke(e,n)}}}function Nl(s){let e,l,t=s[23].target&&s[23].source!=s[23].target&&dt(s);return{c(){t&&t.c(),e=F()},l(i){t&&t.l(i),e=F()},m(i,n){t&&t.m(i,n),w(i,e,n),l=!0},p(i,n){i[23].target&&i[23].source!=i[23].target?t?(t.p(i,n),n&1&&j(t,1)):(t=dt(i),t.c(),j(t,1),t.m(e.parentNode,e)):t&&(fe(),G(t,1,1,()=>{t=null}),ue())},i(i){l||(j(t),l=!0)},o(i){G(t),l=!1},d(i){t&&t.d(i),i&&h(e)}}}function dt(s){var u,c;let e,l,t,i,n;const r=[Ol,Al],a=[];function o(f,b){var d;return(d=f[23])!=null&&d.external?1:0}return e=o(s),l=a[e]=r[e](s),i=new Bt({props:{datum:s[23],updatePosition:s[3],label:((c=(u=s[23])==null?void 0:u.property)==null?void 0:c.replace(le,""))||""}}),{c(){l.c(),t=W(),ge(i.$$.fragment)},l(f){l.l(f),t=X(f),be(i.$$.fragment,f)},m(f,b){a[e].m(f,b),w(f,t,b),ve(i,f,b),n=!0},p(f,b){var g,S;let d=e;e=o(f),e===d?a[e].p(f,b):(fe(),G(a[d],1,1,()=>{a[d]=null}),ue(),l=a[e],l?l.p(f,b):(l=a[e]=r[e](f),l.c()),j(l,1),l.m(t.parentNode,t));const v={};b&1&&(v.datum=f[23]),b&8&&(v.updatePosition=f[3]),b&1&&(v.label=((S=(g=f[23])==null?void 0:g.property)==null?void 0:S.replace(le,""))||""),i.$set(v)},i(f){n||(j(l),j(i.$$.fragment,f),n=!0)},o(f){G(l),G(i.$$.fragment,f),n=!1},d(f){a[e].d(f),f&&h(t),ke(i,f)}}}function Al(s){let e,l,t,i;return l=new Gt({props:{site:s[6],entities:s[2],updatePosition:s[3],datum:s[23],essaysItems:s[5],openNode:s[9]}}),{c(){e=N("a"),ge(l.$$.fragment),this.h()},l(n){e=A(n,"A",{href:!0,target:!0,rel:!0});var r=M(e);be(l.$$.fragment,r),r.forEach(h),this.h()},h(){p(e,"href",t=s[23].target),p(e,"target","_blank"),p(e,"rel","noreferrer")},m(n,r){w(n,e,r),ve(l,e,null),i=!0},p(n,r){const a={};r&64&&(a.site=n[6]),r&4&&(a.entities=n[2]),r&8&&(a.updatePosition=n[3]),r&1&&(a.datum=n[23]),r&32&&(a.essaysItems=n[5]),l.$set(a),(!i||r&1&&t!==(t=n[23].target))&&p(e,"href",t)},i(n){i||(j(l.$$.fragment,n),i=!0)},o(n){G(l.$$.fragment,n),i=!1},d(n){n&&h(e),ke(l)}}}function Ol(s){let e,l;function t(){return s[16](s[23])}function i(){return s[17](s[23])}return e=new Gt({props:{site:s[6],entities:s[2],updatePosition:s[3],datum:s[23],essaysItems:s[5],openNode:s[9]}}),e.$on("click",t),e.$on("keydown",i),{c(){ge(e.$$.fragment)},l(n){be(e.$$.fragment,n)},m(n,r){ve(e,n,r),l=!0},p(n,r){s=n;const a={};r&64&&(a.site=s[6]),r&4&&(a.entities=s[2]),r&8&&(a.updatePosition=s[3]),r&1&&(a.datum=s[23]),r&32&&(a.essaysItems=s[5]),e.$set(a)},i(n){l||(j(e.$$.fragment,n),l=!0)},o(n){G(e.$$.fragment,n),l=!1},d(n){ke(e,n)}}}function _t(s){let e,l,t,i,n;function r(...c){return s[15](s[23],...c)}const a=[Nl,Ll],o=[];function u(c,f){return f&3&&(e=null),e==null&&(e=!!c[1].some(r)),e?0:c[23].source&&c[23].target&&c[23].source!=c[23].target?1:-1}return~(l=u(s,-1))&&(t=o[l]=a[l](s)),{c(){t&&t.c(),i=F()},l(c){t&&t.l(c),i=F()},m(c,f){~l&&o[l].m(c,f),w(c,i,f),n=!0},p(c,f){s=c;let b=l;l=u(s,f),l===b?~l&&o[l].p(s,f):(t&&(fe(),G(o[b],1,1,()=>{o[b]=null}),ue()),~l?(t=o[l],t?t.p(s,f):(t=o[l]=a[l](s),t.c()),j(t,1),t.m(i.parentNode,i)):t=null)},i(c){n||(j(t),n=!0)},o(c){G(t),n=!1},d(c){~l&&o[l].d(c),c&&h(i)}}}function Cl(s){let e,l,t,i=s[0]&&typeof s[0]=="object"&&Object.keys(s[0]).length>0,n,r=s[8]&&ut(),a=i&&ct(s);return{c(){e=N("section"),r&&r.c(),l=W(),t=N("div"),a&&a.c()},l(o){e=A(o,"SECTION",{});var u=M(e);r&&r.l(u),l=X(u),t=A(u,"DIV",{});var c=M(t);a&&a.l(c),c.forEach(h),u.forEach(h)},m(o,u){w(o,e,u),r&&r.m(e,null),C(e,l),C(e,t),a&&a.m(t,null),s[18](e),n=!0},p(o,[u]){o[8]?r||(r=ut(),r.c(),r.m(e,l)):r&&(r.d(1),r=null),u&1&&(i=o[0]&&typeof o[0]=="object"&&Object.keys(o[0]).length>0),i?a?(a.p(o,u),u&1&&j(a,1)):(a=ct(o),a.c(),j(a,1),a.m(t,null)):a&&(fe(),G(a,1,1,()=>{a=null}),ue())},i(o){n||(j(a),n=!0)},o(o){G(a),n=!1},d(o){o&&h(e),r&&r.d(),a&&a.d(),s[18](null)}}}function Ml(s){let e=document.querySelector(`#col_${s}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function Vl(s,e){return e.filter(l=>!s.some(t=>t.target===l.target||t.id===l.target))}function jl(s,e,l){let t,i=$,n=()=>(i(),i=je(d,T=>l(20,t=T)),d),r,a;Q(s,he,T=>l(21,r=T)),Q(s,Ue,T=>l(22,a=T)),s.$$.on_destroy.push(()=>i());let{category:o}=e,{data:u}=e,{newData:c}=e,{dataLen:f}=e,{entities:b}=e,{updatePosition:d}=e;n();let{index:v}=e,{loadData:g}=e,{defaultNodes:S}=e,{batchSize:E}=e,{essaysItems:O}=e,{site:_}=e,I,P,m={nodes:[],links:[]};async function k(T,Y){Ml(Y),l(8,P=!0),r.splice(Y,r.length-Y);let re=r.map(q=>q.data).flat();const V=a.find(q=>q["@id"].replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")===T.target.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/"));if(V!=null&&V["o:items"]&&r.length==1){let q=[];V["o:items"]["@id"],a.find(y=>y["@id"].replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")===T.target.replace(/\/items\//,"/resources/").replace(/\/media\//,"/resources/").replace(/\/item_sets\//,"/resources/")).forEach(y=>{q.push(y)});let oe=q.map(y=>{var z,ie;return{title:y[ae.title]||((z=y.data)==null?void 0:z["@id"]),"@id":y["@id"],thumbnail_display_urls:((ie=y[ae.img[0]])==null?void 0:ie[0]["@id"])||getNestedValue(y,ae.img.join("."))}});V.related={...oe}}m=await zt([{data:V}]);let se=m.links.filter(q=>q.source==T.target||q.target==T.target),te=Vl([...S,...re],se),D=se.slice(0,E);x(he,r[Y]={id:T.target,data:se.sort((q,J)=>{if(q.property)return q.property.localeCompare(J.property)}),page:0,new:te,paginate:D},r),l(8,P=!1),te.length>0&&g(D,E),x(d,t=!0,t)}const L=(T,Y)=>(Y==null?void 0:Y.title)===T.title,B=T=>{k(T,v+1)},U=T=>{k(T,v+1)};function R(T){Ee[T?"unshift":"push"](()=>{I=T,l(7,I)})}return s.$$set=T=>{"category"in T&&l(10,o=T.category),"data"in T&&l(0,u=T.data),"newData"in T&&l(1,c=T.newData),"dataLen"in T&&l(11,f=T.dataLen),"entities"in T&&l(2,b=T.entities),"updatePosition"in T&&n(l(3,d=T.updatePosition)),"index"in T&&l(4,v=T.index),"loadData"in T&&l(12,g=T.loadData),"defaultNodes"in T&&l(13,S=T.defaultNodes),"batchSize"in T&&l(14,E=T.batchSize),"essaysItems"in T&&l(5,O=T.essaysItems),"site"in T&&l(6,_=T.site)},[u,c,b,d,v,O,_,I,P,k,o,f,g,S,E,L,B,U,R]}class Ut extends Pe{constructor(e){super(),Se(this,e,jl,Cl,De,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function ht(s,e,l){const t=s.slice();return t[35]=e[l],t[37]=l,t}function Ze(s){const e=s.slice(),l=e[35].paginate.filter(i=>!e[3].mainCategories.some(n=>n.props.includes(i.property)));e[38]=l;const t=e[35].data.filter(i=>!e[3].mainCategories.some(n=>n.props.includes(i.property))).length;return e[39]=t,e}function mt(s,e,l){const t=s.slice();t[40]=e[l];const i=t[35].paginate.filter(function(...a){return s[20](t[40],...a)});t[41]=i;const n=t[35].data.filter(function(...a){return s[21](t[40],...a)}).length;return t[39]=n,t}function ql(s){let e,l,t=s[5],i=[];for(let r=0;r<t.length;r+=1)i[r]=It(ht(s,t,r));const n=r=>G(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=F()},l(r){for(let a=0;a<i.length;a+=1)i[a].l(r);e=F()},m(r,a){for(let o=0;o<i.length;o+=1)i[o].m(r,a);w(r,e,a),l=!0},p(r,a){if(a[0]&16063){t=r[5];let o;for(o=0;o<t.length;o+=1){const u=ht(r,t,o);i[o]?(i[o].p(u,a),j(i[o],1)):(i[o]=It(u),i[o].c(),j(i[o],1),i[o].m(e.parentNode,e))}for(fe(),o=t.length;o<i.length;o+=1)n(o);ue()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)j(i[a]);l=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)G(i[a]);l=!1},d(r){Le(i,r),r&&h(e)}}}function zl(s){let e,l,t;return{c(){e=N("div"),l=N("h4"),t=Z("Loading Graph..."),this.h()},l(i){e=A(i,"DIV",{});var n=M(e);l=A(n,"H4",{class:!0});var r=M(l);t=K(r,"Loading Graph..."),r.forEach(h),n.forEach(h),this.h()},h(){p(l,"class","loading svelte-4h2tw7")},m(i,n){w(i,e,n),C(e,l),C(l,t)},p:$,i:$,o:$,d(i){i&&h(e)}}}function pt(s){let e,l,t,i=s[35].paginate.filter(s[19]).length>0,n,r,a,o,u,c=s[3].mainCategories,f=[];for(let g=0;g<c.length;g+=1)f[g]=bt(mt(s,c,g));const b=g=>G(f[g],1,1,()=>{f[g]=null});let d=i&&vt(Ze(s)),v=s[35].paginate.length<s[35].new.length&&yt(s);return{c(){e=N("div"),l=N("div");for(let g=0;g<f.length;g+=1)f[g].c();t=W(),d&&d.c(),n=W(),v&&v.c(),r=W(),this.h()},l(g){e=A(g,"DIV",{class:!0,id:!0});var S=M(e);l=A(S,"DIV",{});var E=M(l);for(let O=0;O<f.length;O+=1)f[O].l(E);t=X(E),d&&d.l(E),n=X(E),v&&v.l(E),E.forEach(h),S.forEach(h),r=X(g),this.h()},h(){p(e,"class","links svelte-4h2tw7"),p(e,"id","col_"+s[37])},m(g,S){w(g,e,S),C(e,l);for(let E=0;E<f.length;E+=1)f[E].m(l,null);C(l,t),d&&d.m(l,null),C(l,n),v&&v.m(l,null),s[24](e),w(g,r,S),a=!0,o||(u=[H(e,"scroll",s[25]),H(e,"click",s[26]),H(e,"keypress",s[27])],o=!0)},p(g,S){if(S[0]&7725){c=g[3].mainCategories;let E;for(E=0;E<c.length;E+=1){const O=mt(g,c,E);f[E]?(f[E].p(O,S),j(f[E],1)):(f[E]=bt(O),f[E].c(),j(f[E],1),f[E].m(l,t))}for(fe(),E=c.length;E<f.length;E+=1)b(E);ue()}S[0]&40&&(i=g[35].paginate.filter(g[19]).length>0),i?d?(d.p(Ze(g),S),S[0]&40&&j(d,1)):(d=vt(Ze(g)),d.c(),j(d,1),d.m(l,n)):d&&(fe(),G(d,1,1,()=>{d=null}),ue()),g[35].paginate.length<g[35].new.length?v?v.p(g,S):(v=yt(g),v.c(),v.m(l,null)):v&&(v.d(1),v=null)},i(g){if(!a){for(let S=0;S<c.length;S+=1)j(f[S]);j(d),a=!0}},o(g){f=f.filter(Boolean);for(let S=0;S<f.length;S+=1)G(f[S]);G(d),a=!1},d(g){g&&h(e),Le(f,g),d&&d.d(),v&&v.d(),s[24](null),g&&h(r),o=!1,ye(u)}}}function gt(s){let e,l;return e=new Ut({props:{site:s[3].publicSite,essaysItems:s[2],category:s[40].key,data:s[41],newData:s[35].new,dataLen:s[39],index:s[37],entities:s[9],updatePosition:s[0],batchSize:s[10],defaultNodes:[...s[11]],loadData:s[12]}}),{c(){ge(e.$$.fragment)},l(t){be(e.$$.fragment,t)},m(t,i){ve(e,t,i),l=!0},p(t,i){const n={};i[0]&8&&(n.site=t[3].publicSite),i[0]&4&&(n.essaysItems=t[2]),i[0]&8&&(n.category=t[40].key),i[0]&40&&(n.data=t[41]),i[0]&32&&(n.newData=t[35].new),i[0]&40&&(n.dataLen=t[39]),i[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){G(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function bt(s){let e,l,t=s[41].length>0&&gt(s);return{c(){t&&t.c(),e=F()},l(i){t&&t.l(i),e=F()},m(i,n){t&&t.m(i,n),w(i,e,n),l=!0},p(i,n){i[41].length>0?t?(t.p(i,n),n[0]&40&&j(t,1)):(t=gt(i),t.c(),j(t,1),t.m(e.parentNode,e)):t&&(fe(),G(t,1,1,()=>{t=null}),ue())},i(i){l||(j(t),l=!0)},o(i){G(t),l=!1},d(i){t&&t.d(i),i&&h(e)}}}function vt(s){let e,l,t=s[38].length>0&&kt(s);return{c(){t&&t.c(),e=F()},l(i){t&&t.l(i),e=F()},m(i,n){t&&t.m(i,n),w(i,e,n),l=!0},p(i,n){i[38].length>0?t?(t.p(i,n),n[0]&40&&j(t,1)):(t=kt(i),t.c(),j(t,1),t.m(e.parentNode,e)):t&&(fe(),G(t,1,1,()=>{t=null}),ue())},i(i){l||(j(t),l=!0)},o(i){G(t),l=!1},d(i){t&&t.d(i),i&&h(e)}}}function kt(s){let e,l;return e=new Ut({props:{site:s[3].publicSite,essaysItems:s[2],category:"",data:s[38],newData:s[35].new,dataLen:s[39],index:s[37],entities:s[9],updatePosition:s[0],batchSize:s[10],defaultNodes:[...s[11]],loadData:s[12]}}),{c(){ge(e.$$.fragment)},l(t){be(e.$$.fragment,t)},m(t,i){ve(e,t,i),l=!0},p(t,i){const n={};i[0]&8&&(n.site=t[3].publicSite),i[0]&4&&(n.essaysItems=t[2]),i[0]&40&&(n.data=t[38]),i[0]&32&&(n.newData=t[35].new),i[0]&40&&(n.dataLen=t[39]),i[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){G(e.$$.fragment,t),l=!1},d(t){ke(e,t)}}}function yt(s){let e,l,t,i;function n(){return s[22](s[37])}function r(){return s[23](s[37])}return{c(){e=N("div"),l=Z("Load more"),this.h()},l(a){e=A(a,"DIV",{class:!0});var o=M(e);l=K(o,"Load more"),o.forEach(h),this.h()},h(){p(e,"class","more svelte-4h2tw7")},m(a,o){w(a,e,o),C(e,l),t||(i=[H(e,"click",n),H(e,"keydown",r)],t=!0)},p(a,o){s=a},d(a){a&&h(e),t=!1,ye(i)}}}function It(s){var i,n;let e,l,t=((i=s[35])==null?void 0:i.new)&&((n=s[35])==null?void 0:n.new.length)>0&&pt(s);return{c(){t&&t.c(),e=F()},l(r){t&&t.l(r),e=F()},m(r,a){t&&t.m(r,a),w(r,e,a),l=!0},p(r,a){var o,u;(o=r[35])!=null&&o.new&&((u=r[35])==null?void 0:u.new.length)>0?t?(t.p(r,a),a[0]&32&&j(t,1)):(t=pt(r),t.c(),j(t,1),t.m(e.parentNode,e)):t&&(fe(),G(t,1,1,()=>{t=null}),ue())},i(r){l||(j(t),l=!0)},o(r){G(t),l=!1},d(r){t&&t.d(r),r&&h(e)}}}function wt(s){let e,l,t,i;return{c(){e=N("div"),l=Z("✕"),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=M(e);l=K(r,"✕"),r.forEach(h),this.h()},h(){p(e,"class","close svelte-4h2tw7")},m(n,r){w(n,e,r),C(e,l),t||(i=[H(e,"click",s[29]),H(e,"keypress",s[30])],t=!0)},p:$,d(n){n&&h(e),t=!1,ye(i)}}}function Fl(s){let e,l,t,i,n,r;const a=[zl,ql],o=[];function u(f,b){return f[8].length==0?0:1}l=u(s),t=o[l]=a[l](s);let c=s[5].length>1&&wt(s);return{c(){e=N("div"),t.c(),i=W(),c&&c.c(),n=F(),this.h()},l(f){e=A(f,"DIV",{class:!0});var b=M(e);t.l(b),b.forEach(h),i=X(f),c&&c.l(f),n=F(),this.h()},h(){p(e,"class","graph svelte-4h2tw7")},m(f,b){w(f,e,b),o[l].m(e,null),s[28](e),w(f,i,b),c&&c.m(f,b),w(f,n,b),r=!0},p(f,b){let d=l;l=u(f),l===d?o[l].p(f,b):(fe(),G(o[d],1,1,()=>{o[d]=null}),ue(),t=o[l],t?t.p(f,b):(t=o[l]=a[l](f),t.c()),j(t,1),t.m(e,null)),f[5].length>1?c?c.p(f,b):(c=wt(f),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},i(f){r||(j(t),r=!0)},o(f){G(t),r=!1},d(f){f&&h(e),o[l].d(),s[28](null),f&&h(i),c&&c.d(f),f&&h(n)}}}function Gl(s,e,l){const t=l-e;return(s-e)/t*100}function Bl(s,e,l){const t=l-e;return e+t*s/100}function Ul(s,e,l){let t,i,n,r,a;Q(s,Te,y=>l(32,i=y)),Q(s,he,y=>l(5,n=y)),Q(s,Ue,y=>l(33,r=y));let{updatePosition:o}=e,{handlePosition:u}=e,{data:c}=e,{visibleItemsID:f}=e,{essaysItems:b}=e,{config:d}=e,{items:v}=e,{screenSize:g}=e,S;const E=pe([]);Q(s,E,y=>l(8,a=y));let O=d.batch,_,I=c.nodes.filter(y=>f.includes(y.id));Be(async()=>{P(c.nodes,O)}),Mt(()=>{_.lastElementChild&&g>600&&_.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),u()});async function P(y,z){const ie=y.map(ee=>ee.id||(ee==null?void 0:ee.target)),_e=Math.ceil(ie.length/z);for(let ee=0;ee<_e;ee++){ie.slice(ee*z,(ee+1)*z);let de=r.filter(ce=>ie.includes(ce["@id"])||y.includes(ce["@id"]));E.update(ce=>(ce.includes(...de)||ce.push(...de),ce))}}let m;const k=(y,z)=>{var ie,_e,ee,de,ce;if(z!=null){const ne=((ie=n[y])==null?void 0:ie.page)+1||0;x(he,n[y]={...n[y],page:ne,paginate:(_e=n[y])==null?void 0:_e.data.slice(0,ne*O)},n),(ee=n[y])!=null&&ee.data&&((de=n[y])==null?void 0:de.paginate.length)!=((ce=n[y])==null?void 0:ce.data.length)&&P(n[y].paginate.slice(-O),O)}};let L=0;function B(y){var z,ie,_e,ee,de,ce;if(i){const ne=document.querySelectorAll(".links:first-of-type .node");let We=(z=ne==null?void 0:ne[L])==null?void 0:z.offsetTop,Wt=(ie=ne==null?void 0:ne[L])==null?void 0:ie.getAttribute("data-id"),Xe=(_e=ne==null?void 0:ne[L+1])==null?void 0:_e.offsetTop,Xt=(ee=ne==null?void 0:ne[L+1])==null?void 0:ee.getAttribute("data-id"),Ht=(de=document.querySelector(`.node-highlite[data-id="${Wt}"]`))==null?void 0:de.offsetTop,Rt=(ce=document.querySelector(`.node-highlite[data-id="${Xt}"]`))==null?void 0:ce.offsetTop,Yt=Gl(y,We,Xe),He=Bl(Yt,Ht,Rt);const Ne=document.querySelector(".markdown__container");y>Xe&&L++,y<We&&L!=0&&L--,Ne&&He&&We!==Xe&&He>0&&(Ne==null||Ne.scrollTo({top:He}))}}const U=y=>!d.mainCategories.some(z=>z.props.includes(y.property)),R=(y,z)=>y.props.includes(z.property),T=(y,z)=>y.props.includes(z.property),Y=y=>k(y,m),re=y=>k(y,m);function V(y){Ee[y?"unshift":"push"](()=>{m=y,l(7,m)})}const se=()=>{let y=document.querySelector("#col_0");y.addEventListener("scroll",z=>{l(4,S=y==null?void 0:y.scrollTop)}),u()},te=()=>{u()},D=()=>{u()};function q(y){Ee[y?"unshift":"push"](()=>{_=y,l(6,_)})}const J=()=>{x(he,n=[],n),u()},oe=()=>{x(he,n=[],n)};return s.$$set=y=>{"updatePosition"in y&&l(0,o=y.updatePosition),"handlePosition"in y&&l(1,u=y.handlePosition),"data"in y&&l(14,c=y.data),"visibleItemsID"in y&&l(15,f=y.visibleItemsID),"essaysItems"in y&&l(2,b=y.essaysItems),"config"in y&&l(3,d=y.config),"items"in y&&l(16,v=y.items),"screenSize"in y&&l(17,g=y.screenSize)},s.$$.update=()=>{var y;s.$$.dirty[0]&65544&&l(18,t=v.filter(z=>z==null?void 0:z.data).map(z=>{var ie,_e,ee,de;return{img:((ie=z.data[d.paths.img[0]])==null?void 0:ie[0]["@id"])||Ge(z.data,d.paths.img.join(".")),source:`item_${z.id}`,target:(_e=z.data)==null?void 0:_e["@id"],title:((ee=z.data)==null?void 0:ee[d.paths.title])||((de=z.data)==null?void 0:de["@id"])||""}})),s.$$.dirty[0]&262176&&(n&&n.length==0||he&&((y=n==null?void 0:n[0])==null?void 0:y.data.length)==0)&&x(he,n[0]={data:t,new:t,page:0,paginate:t},n),s.$$.dirty[0]&16&&B(S)},[o,u,b,d,S,n,_,m,a,E,O,I,P,k,c,f,v,g,t,U,R,T,Y,re,V,se,te,D,q,J,oe]}class Wl extends Pe{constructor(e){super(),Se(this,e,Ul,Fl,De,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function Et(s,e,l){const t=s.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function Pt(s,e,l){const t=s.slice();return t[6]=e[l],t}function St(s){let e,l,t=Object.entries(s[0]),i=[];for(let n=0;n<t.length;n+=1)i[n]=Ct(Et(s,t,n));return{c(){e=Ie("svg"),l=Ie("g");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){e=we(n,"svg",{class:!0});var r=M(e);l=we(r,"g",{});var a=M(l);for(let o=0;o<i.length;o+=1)i[o].l(a);a.forEach(h),r.forEach(h),this.h()},h(){p(e,"class","svelte-1ijue24")},m(n,r){w(n,e,r),C(e,l);for(let a=0;a<i.length;a+=1)i[a].m(l,null)},p(n,r){if(r&3){t=Object.entries(n[0]);let a;for(a=0;a<t.length;a+=1){const o=Et(n,t,a);i[a]?i[a].p(o,r):(i[a]=Ct(o),i[a].c(),i[a].m(l,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(n){n&&h(e),Le(i,n)}}}function Dt(s){let e,l,t=s[6].label+"",i,n,r,a,o,u,c,f,b=s[6].label+"",d,v,g,S,E,O,_=s[6].reverse&&s[6].label&&Tt(),I=!s[6].reverse&&s[6].label&&Lt(),P=s[6].reverse&&s[6].label&&Nt(),m=!s[6].reverse&&s[6].label&&At();return{c(){e=Ie("text"),l=Ie("textPath"),i=Z(t),_&&_.c(),n=F(),I&&I.c(),c=Ie("text"),f=Ie("textPath"),d=Z(b),P&&P.c(),v=F(),m&&m.c(),this.h()},l(k){e=we(k,"text",{class:!0,source:!0,target:!0});var L=M(e);l=we(L,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var B=M(l);i=K(B,t),_&&_.l(B),n=F(),I&&I.l(B),B.forEach(h),L.forEach(h),c=we(k,"text",{class:!0,source:!0,target:!0});var U=M(c);f=we(U,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var R=M(f);d=K(R,b),P&&P.l(R),v=F(),m&&m.l(R),R.forEach(h),U.forEach(h),this.h()},h(){p(l,"alignment-baseline","middle"),p(l,"href",r="#path_"+s[2]),p(l,"startOffset","99%"),p(l,"text-anchor","end"),p(e,"class",a="background "+s[6].class+" svelte-1ijue24"),p(e,"source",o=s[6].datum.source),p(e,"target",u=s[6].datum.target),p(f,"alignment-baseline","middle"),p(f,"href",g="#path_"+s[2]),p(f,"startOffset","99%"),p(f,"text-anchor","end"),p(c,"class",S=ze(s[6].class)+" svelte-1ijue24"),p(c,"source",E=s[6].datum.source),p(c,"target",O=s[6].datum.target)},m(k,L){w(k,e,L),C(e,l),C(l,i),_&&_.m(l,null),C(l,n),I&&I.m(l,null),w(k,c,L),C(c,f),C(f,d),P&&P.m(f,null),C(f,v),m&&m.m(f,null)},p(k,L){L&1&&t!==(t=k[6].label+"")&&me(i,t),k[6].reverse&&k[6].label?_||(_=Tt(),_.c(),_.m(l,n)):_&&(_.d(1),_=null),!k[6].reverse&&k[6].label?I||(I=Lt(),I.c(),I.m(l,null)):I&&(I.d(1),I=null),L&1&&r!==(r="#path_"+k[2])&&p(l,"href",r),L&1&&a!==(a="background "+k[6].class+" svelte-1ijue24")&&p(e,"class",a),L&1&&o!==(o=k[6].datum.source)&&p(e,"source",o),L&1&&u!==(u=k[6].datum.target)&&p(e,"target",u),L&1&&b!==(b=k[6].label+"")&&me(d,b),k[6].reverse&&k[6].label?P||(P=Nt(),P.c(),P.m(f,v)):P&&(P.d(1),P=null),!k[6].reverse&&k[6].label?m||(m=At(),m.c(),m.m(f,null)):m&&(m.d(1),m=null),L&1&&g!==(g="#path_"+k[2])&&p(f,"href",g),L&1&&S!==(S=ze(k[6].class)+" svelte-1ijue24")&&p(c,"class",S),L&1&&E!==(E=k[6].datum.source)&&p(c,"source",E),L&1&&O!==(O=k[6].datum.target)&&p(c,"target",O)},d(k){k&&h(e),_&&_.d(),I&&I.d(),k&&h(c),P&&P.d(),m&&m.d()}}}function Tt(s){let e;return{c(){e=Z(" -")},l(l){e=K(l," -")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Lt(s){let e;return{c(){e=Z("→")},l(l){e=K(l,"→")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Nt(s){let e;return{c(){e=Z("←")},l(l){e=K(l,"←")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function At(s){let e;return{c(){e=Z("→")},l(l){e=K(l,"→")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Ot(s){let e,l,t,i,n,r,a=(s[1]==s[6].datum.source&&s[6].selected!="not-selected"||s[1]==s[6].datum.target)&&Dt(s);return{c(){e=Ie("path"),a&&a.c(),r=F(),this.h()},l(o){e=we(o,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),M(e).forEach(h),a&&a.l(o),r=F(),this.h()},h(){p(e,"id",l="path_"+s[2]),p(e,"class",t=ze(s[6].class)+" svelte-1ijue24"),p(e,"data-attr",i=s[6].selected),p(e,"d",n=s[6].d)},m(o,u){w(o,e,u),a&&a.m(o,u),w(o,r,u)},p(o,u){u&1&&l!==(l="path_"+o[2])&&p(e,"id",l),u&1&&t!==(t=ze(o[6].class)+" svelte-1ijue24")&&p(e,"class",t),u&1&&i!==(i=o[6].selected)&&p(e,"data-attr",i),u&1&&n!==(n=o[6].d)&&p(e,"d",n),o[1]==o[6].datum.source&&o[6].selected!="not-selected"||o[1]==o[6].datum.target?a?a.p(o,u):(a=Dt(o),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(o){o&&h(e),a&&a.d(o),o&&h(r)}}}function Ct(s){let e,l=s[3],t=[];for(let i=0;i<l.length;i+=1)t[i]=Ot(Pt(s,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=F()},l(i){for(let n=0;n<t.length;n+=1)t[n].l(i);e=F()},m(i,n){for(let r=0;r<t.length;r+=1)t[r].m(i,n);w(i,e,n)},p(i,n){if(n&3){l=i[3];let r;for(r=0;r<l.length;r+=1){const a=Pt(i,l,r);t[r]?t[r].p(a,n):(t[r]=Ot(a),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(i){Le(t,i),i&&h(e)}}}function Xl(s){let e=Object.keys(s[0]).length>0,l,t=e&&St(s);return{c(){t&&t.c(),l=F()},l(i){t&&t.l(i),l=F()},m(i,n){t&&t.m(i,n),w(i,l,n)},p(i,[n]){n&1&&(e=Object.keys(i[0]).length>0),e?t?t.p(i,n):(t=St(i),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:$,o:$,d(i){t&&t.d(i),i&&h(l)}}}function Hl(s,e,l){let t,i;return Q(s,Me,n=>l(0,t=n)),Q(s,Fe,n=>l(1,i=n)),[t,i]}class Rl extends Pe{constructor(e){super(),Se(this,e,Hl,Xl,De,{})}}function Yl(s){let e,l,t,i,n,r,a,o,u,c,f;return t=new _l({props:{data:s[11],items:s[3],scrollTopVal:s[7]}}),r=new Wl({props:{items:s[3],data:s[8],screenSize:s[0],essaysItems:s[5],visibleItemsID:s[4],handlePosition:s[13],updatePosition:s[12],config:el}}),o=new Rl({}),{c(){e=N("article"),l=N("section"),ge(t.$$.fragment),i=W(),n=N("section"),ge(r.$$.fragment),a=W(),ge(o.$$.fragment),this.h()},l(b){e=A(b,"ARTICLE",{style:!0,class:!0});var d=M(e);l=A(d,"SECTION",{class:!0});var v=M(l);be(t.$$.fragment,v),v.forEach(h),i=X(d),n=A(d,"SECTION",{class:!0});var g=M(n);be(r.$$.fragment,g),g.forEach(h),a=X(d),be(o.$$.fragment,d),d.forEach(h),this.h()},h(){var b;p(l,"class","markdown__container svelte-1umlmj5"),p(n,"class","graph__container svelte-1umlmj5"),Qt(e,"--theme-color",((b=s[11].meta)==null?void 0:b.color)||"blue"),p(e,"class","svelte-1umlmj5")},m(b,d){w(b,e,d),C(e,l),ve(t,l,null),s[18](l),C(e,i),C(e,n),ve(r,n,null),C(e,a),ve(o,e,null),s[25](e),u=!0,c||(f=[H(l,"wheel",s[19],{passive:!0}),H(l,"scroll",s[20]),H(n,"wheel",s[21],{passive:!0}),H(e,"resize",s[13]),H(e,"scroll",s[22]),H(e,"touchmove",s[23],{passive:!0}),H(e,"click",s[24]),H(e,"keypress",s[16])],c=!0)},p(b,d){const v={};d&8&&(v.items=b[3]),d&128&&(v.scrollTopVal=b[7]),t.$set(v);const g={};d&8&&(g.items=b[3]),d&256&&(g.data=b[8]),d&1&&(g.screenSize=b[0]),d&32&&(g.essaysItems=b[5]),d&16&&(g.visibleItemsID=b[4]),r.$set(g)},i(b){u||(j(t.$$.fragment,b),j(r.$$.fragment,b),j(o.$$.fragment,b),u=!0)},o(b){G(t.$$.fragment,b),G(r.$$.fragment,b),G(o.$$.fragment,b),u=!1},d(b){b&&h(e),ke(t),s[18](null),ke(r),ke(o),s[25](null),c=!1,ye(f)}}}function Jl(s){let e,l,t,i;return{c(){e=N("article"),l=N("section"),t=N("h4"),i=Z("Loading..."),this.h()},l(n){e=A(n,"ARTICLE",{class:!0});var r=M(e);l=A(r,"SECTION",{class:!0});var a=M(l);t=A(a,"H4",{});var o=M(t);i=K(o,"Loading..."),o.forEach(h),a.forEach(h),r.forEach(h),this.h()},h(){p(l,"class","short_text svelte-1umlmj5"),p(e,"class","svelte-1umlmj5")},m(n,r){w(n,e,r),C(e,l),C(l,t),C(t,i)},p:$,i:$,o:$,d(n){n&&h(e)}}}function Zl(s){let e,l,t,i;return{c(){e=N("article"),l=N("section"),t=N("h4"),i=Z("404 Page not found"),this.h()},l(n){e=A(n,"ARTICLE",{class:!0});var r=M(e);l=A(r,"SECTION",{class:!0});var a=M(l);t=A(a,"H4",{});var o=M(t);i=K(o,"404 Page not found"),o.forEach(h),a.forEach(h),r.forEach(h),this.h()},h(){p(l,"class","short_text svelte-1umlmj5"),p(e,"class","svelte-1umlmj5")},m(n,r){w(n,e,r),C(e,l),C(l,t),C(t,i)},p:$,i:$,o:$,d(n){n&&h(e)}}}function Kl(s){var I,P;let e,l,t,i,n,r,a,o,u,c,f,b,d,v,g,S,E,O,_;return document.title=e=((P=(I=s[11])==null?void 0:I.meta)==null?void 0:P.title)||ae.title,{c(){l=W(),t=N("meta"),i=W(),n=N("meta"),r=W(),a=N("meta"),o=W(),u=N("meta"),c=W(),f=N("meta"),b=W(),d=N("meta"),v=W(),g=N("meta"),S=W(),E=N("meta"),O=W(),_=N("meta"),this.h()},l(m){l=X(m),t=A(m,"META",{name:!0,content:!0}),i=X(m),n=A(m,"META",{property:!0,content:!0}),r=X(m),a=A(m,"META",{property:!0,content:!0}),o=X(m),u=A(m,"META",{property:!0,content:!0}),c=X(m),f=A(m,"META",{name:!0,content:!0}),b=X(m),d=A(m,"META",{property:!0,content:!0}),v=X(m),g=A(m,"META",{name:!0,content:!0}),S=X(m),E=A(m,"META",{name:!0,content:!0}),O=X(m),_=A(m,"META",{name:!0,content:!0}),this.h()},h(){var m,k,L,B,U,R,T,Y,re,V,se,te,D,q,J,oe;p(t,"name","description"),p(t,"content",((k=(m=s[11])==null?void 0:m.meta)==null?void 0:k.description)||Ye),p(n,"property","og:url"),p(n,"content",le+((L=s[11])==null?void 0:L.path)||le+((B=s[11])==null?void 0:B.path)),p(a,"property","og:description"),p(a,"content",((R=(U=s[11])==null?void 0:U.meta)==null?void 0:R.description)||Ye),p(u,"property","og:image"),p(u,"content",((Y=(T=s[11])==null?void 0:T.meta)==null?void 0:Y.cover)||$e),p(f,"name","twitter:card"),p(f,"content","summary_large_image"),p(d,"property","twitter:url"),p(d,"content",le+((re=s[11])==null?void 0:re.path)||le+((V=s[11])==null?void 0:V.path)),p(g,"name","twitter:title"),p(g,"content",((te=(se=s[11])==null?void 0:se.meta)==null?void 0:te.title)||ae.title),p(E,"name","twitter:description"),p(E,"content",((q=(D=s[11])==null?void 0:D.meta)==null?void 0:q.description)||Ye),p(_,"name","twitter:image"),p(_,"content",((oe=(J=s[11])==null?void 0:J.meta)==null?void 0:oe.cover)||$e)},m(m,k){w(m,l,k),w(m,t,k),w(m,i,k),w(m,n,k),w(m,r,k),w(m,a,k),w(m,o,k),w(m,u,k),w(m,c,k),w(m,f,k),w(m,b,k),w(m,d,k),w(m,v,k),w(m,g,k),w(m,S,k),w(m,E,k),w(m,O,k),w(m,_,k)},p(m,k){var L,B;k&2048&&e!==(e=((B=(L=m[11])==null?void 0:L.meta)==null?void 0:B.title)||ae.title)&&(document.title=e)},d(m){m&&h(l),m&&h(t),m&&h(i),m&&h(n),m&&h(r),m&&h(a),m&&h(o),m&&h(u),m&&h(c),m&&h(f),m&&h(b),m&&h(d),m&&h(v),m&&h(g),m&&h(S),m&&h(E),m&&h(O),m&&h(_)}}}function Ql(s){let e,l,t,i,n,r,a,o;Zt(s[17]);const u=[Zl,Jl,Yl],c=[];function f(d,v){return d[11]==null&&d[2]==null?0:d[2]==null?1:2}l=f(s),t=c[l]=u[l](s);let b=s[11]!=null&&Kl(s);return{c(){e=N("div"),t.c(),i=W(),b&&b.c(),n=F()},l(d){e=A(d,"DIV",{});var v=M(e);t.l(v),v.forEach(h),i=X(d);const g=Kt("svelte-a4gtco",document.head);b&&b.l(g),n=F(),g.forEach(h)},m(d,v){w(d,e,v),c[l].m(e,null),w(d,i,v),b&&b.m(document.head,null),C(document.head,n),r=!0,a||(o=[H(window,"resize",s[13]),H(window,"click",s[13]),H(window,"resize",s[17])],a=!0)},p(d,[v]){let g=l;l=f(d),l===g?c[l].p(d,v):(fe(),G(c[g],1,1,()=>{c[g]=null}),ue(),t=c[l],t?t.p(d,v):(t=c[l]=u[l](d),t.c()),j(t,1),t.m(e,null)),d[11]!=null&&b.p(d,v)},i(d){r||(j(t),r=!0)},o(d){G(t),r=!1},d(d){d&&h(e),c[l].d(),d&&h(i),b&&b.d(d),h(n),a=!1,ye(o)}}}function $l(s,e,l){let t,i,n,r,a,o;Q(s,tl,V=>l(26,t=V)),Q(s,Je,V=>l(8,i=V)),Q(s,Fe,V=>l(15,n=V)),Q(s,Ve,V=>l(9,a=V)),Q(s,Te,V=>l(10,o=V));let{data:u}=e,c,f,b=[...u.posts].find(V=>V.path.includes(t.params.slug)),d,v,g=[],S=[],E,O;const _=pe(!1);Q(s,_,V=>l(27,r=V));const I=()=>{x(_,r=!0,r)};Be(async()=>{var te;await hl(),x(Je,i=[],i);const V=Ue.subscribe(async D=>{D.length>0&&(l(3,v=await gl(b.text,D)),l(4,g=v.filter(q=>!q.set).map(q=>{var J;return`${(J=q.data)==null?void 0:J["@id"]}`})),l(2,d=await zt(v)),x(Je,i=d,i))}),se=localStorage.getItem("selectedLanguage")||((te=xt)==null?void 0:te[0]);return l(5,S=u.posts.reduce((D,q)=>(!q.path.includes(t.params.slug)&&q.meta.lang==se&&q.links.map(J=>{const oe=D.find(z=>z.id===J),y={title:q.meta.title,url:q.path};oe?oe.essays.some(z=>z.title===y.title&&z.url===y.url)||oe.essays.push(y):D.push({id:J,essays:[y]})}),D),[])),()=>V()});function P(V){Ce.call(this,s,V)}function m(){l(0,c=window.innerWidth)}function k(V){Ee[V?"unshift":"push"](()=>{f=V,l(1,f)})}const L=()=>{I(),x(Te,o=!1,o),l(7,O=f==null?void 0:f.scrollTop)},B=()=>{c<1e3&&(I(),l(7,O=f==null?void 0:f.scrollTop),x(Te,o=!1,o))},U=()=>{c>1e3&&x(Te,o=!0,o)},R=()=>{x(Ve,a=E==null?void 0:E.scrollLeft,a)},T=()=>{x(Ve,a=E==null?void 0:E.scrollLeft,a),I()},Y=()=>{I()};function re(V){Ee[V?"unshift":"push"](()=>{E=V,l(6,E)})}return s.$$set=V=>{"data"in V&&l(14,u=V.data)},s.$$.update=()=>{s.$$.dirty&32768&&I()},[c,f,d,v,g,S,E,O,i,a,o,b,_,I,u,n,P,m,k,L,B,U,R,T,Y,re]}class ns extends Pe{constructor(e){super(),Se(this,e,$l,Ql,De,{data:14})}}export{ns as component,is as universal};
